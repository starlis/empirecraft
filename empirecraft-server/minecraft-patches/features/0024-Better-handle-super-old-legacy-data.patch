From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: chickeneer <emcchickeneer@gmail.com>
Date: Tue, 30 Dec 2025 11:53:22 -0600
Subject: [PATCH] Better handle super old legacy data.

Add priority value to old saved ticks

Very old versions of minecraft did not have a priority for saved ticks
This injects the default priority level for loading in those ancient
ticks

Also remove the old Owner from tamed mobs (wolves) when moving the UUID
field to that datavalue

diff --git a/ca/spottedleaf/dataconverter/minecraft/versions/V2514.java b/ca/spottedleaf/dataconverter/minecraft/versions/V2514.java
index 167109fb53b45901e944ae3eb4a690956fe18e8f..59200b33a30427ad3a1729ee0cc7c8a0d382d211 100644
--- a/ca/spottedleaf/dataconverter/minecraft/versions/V2514.java
+++ b/ca/spottedleaf/dataconverter/minecraft/versions/V2514.java
@@ -240,7 +240,7 @@ public final class V2514 {
 
     private static void updateAnimalOwner(final MapType data) {
         updateAnimal(data);
-
+        data.remove("Owner"); // EMC - Remove really old Owner data
         replaceUUIDString(data, "OwnerUUID", "Owner");
     }
 
diff --git a/ca/spottedleaf/dataconverter/minecraft/versions/V99.java b/ca/spottedleaf/dataconverter/minecraft/versions/V99.java
index 3a2a82bc7c18667bed10086203d995f9effe3399..ab62a22ad72e3ada7d3a9ed33738e3194773eb44 100644
--- a/ca/spottedleaf/dataconverter/minecraft/versions/V99.java
+++ b/ca/spottedleaf/dataconverter/minecraft/versions/V99.java
@@ -331,6 +331,11 @@ public final class V99 {
             if (tileTicks != null) {
                 for (int i = 0, len = tileTicks.size(); i < len; ++i) {
                     final MapType tileTick = tileTicks.getMap(i);
+                    // EMC start
+                    if (!tileTick.hasKey("p")) {
+                        tileTick.setInt("p", 0); // SavedTick priority NORMAL id.
+                    }
+                    // EMC end
                     WalkerUtils.convert(MCTypeRegistry.BLOCK_NAME, tileTick, "i", fromVersion, toVersion);
                 }
             }
